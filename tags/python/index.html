
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="cwza&#39;s blog">
    <title>Tag: python - cwza&#39;s blog</title>
    <meta name="author" content="Cwza">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/my_blog/atom.xml">
    
    <meta property="og:type" content="blog">
<meta property="og:title" content="cwza's blog">
<meta property="og:url" content="http://cwza.github.io/my_blog/tags/python/index.html">
<meta property="og:site_name" content="cwza's blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="cwza's blog">
    
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/f563bb5ba525d2aa148cd22fb4c2db26?s=640"/>
    
    
    
    

    <!--add google search console verification-->
    

    <!--STYLES-->
    <link rel="stylesheet" href="/my_blog/assets/css/style.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-70916999-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/my_blog/ ">cwza&#39;s blog</a>
    </h1>
    
        
            <a  class="header-right-icon st-search-show-outputs"
                href="#search">
        
        
            <i class="fa fa-lg fa-search"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="1">
    
        <div class="sidebar-profile">
            <a href="/my_blog/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/f563bb5ba525d2aa148cd22fb4c2db26?s=110"/>
            </a>
            <span class="sidebar-profile-name">Cwza</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/my_blog/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/my_blog/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/my_blog/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/my_blog/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archives</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/cwza" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://facebook.com/profile.php?id=100001791342932" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
                    <span class="sidebar-button-desc">Facebook</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:cwz0205a@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/my_blog/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
        
        <article class="postShorten postShorten--thumbnailimg-right" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2016/03/16/remove-python-pyc-file/">Remove Python pyc File</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Wed Mar 16 2016 12:08:00 GMT+0800">
	
		    Mar 16, 2016
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/python/">python</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-excerpt" itemprop="articleBody">
                        <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Bash Command</a></li>
<li><a href="#sec-2">2. Git post-checkout hook</a></li>
<li><a href="#sec-3">3. Python Environment Variable PYTHONDONTWRITEBYTECODE</a>
<ul>
<li><a href="#sec-3-1">3.1. set it at .bash_profile(global)</a></li>
<li><a href="#sec-3-2">3.2. set it at activate and remove it at deactivate by VirtualEnv</a></li>
<li><a href="#sec-3-3">3.3. use direnv to set</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Python interpreter在執行的時候會在每個package底下產生__pycache__ folder and <b>.pyc, *.pyo file<br>
一般而言這些file不會進入版本控管所以在.gitigore中通常會有</b>.py[co], <span class="underline"><span class="underline">pycache</span></span><br>
但以上設定卻會在git branch switch時導致pyc, pyo殘留問題<br>
以下介紹3種方法來處理<br>
</p>
                        
                            <a href="/my_blog/2016/03/16/remove-python-pyc-file/" class="postShorten-excerpt_link link">
                                Continue reading
                            </a>
                            
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-right" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2016/02/19/django學習筆記/">django學習筆記</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Fri Feb 19 2016 16:15:00 GMT+0800">
	
		    Feb 19, 2016
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/python/">python</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-excerpt" itemprop="articleBody">
                        <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Coding Style</a>
<ul>
<li><a href="#sec-1-1">1.1. Use Explicit Relative Imports</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Layout Django Project</a></li>
<li><a href="#sec-3">3. Setting Files</a>
<ul>
<li><a href="#sec-3-1">3.1. 如何處理多環境設定(production, staging, local)</a></li>
<li><a href="#sec-3-2">3.2. 重要的secret key問題(secret key不該進入version control)</a></li>
<li><a href="#sec-3-3">3.3. 當環境限制無法使用environment variable時怎麼做呢</a></li>
<li><a href="#sec-3-4">3.4. Requirements Files也要照環境分開</a></li>
<li><a href="#sec-3-5">3.5. Setting Files中的Path不要使用Absolute Path</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Model</a>
<ul>
<li><a href="#sec-4-1">4.1. Model Inheritance</a></li>
<li><a href="#sec-4-2">4.2. Model Design Ordering</a></li>
<li><a href="#sec-4-3">4.3. When to Use Null and Blank</a></li>
<li><a href="#sec-4-4">4.4. When to Use BinaryField</a></li>
<li><a href="#sec-4-5">4.5. Try to Avoid Using Generic Relations</a></li>
<li><a href="#sec-4-6">4.6. The Model meta API</a></li>
<li><a href="#sec-4-7">4.7. Fat Models</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Queries and the Database Layer</a>
<ul>
<li><a href="#sec-5-1">5.1. Use get object or 404() for Single Objects instead of get()</a></li>
<li><a href="#sec-5-2">5.2. Be Careful With Queries That Might Throw Exceptions</a>
<ul>
<li><a href="#sec-5-2-1">5.2.1. ObjectDoesNotExist vs. DoesNotExist</a></li>
<li><a href="#sec-5-2-2">5.2.2. When You Just Want One Object but Get Three Back</a></li>
</ul>
</li>
<li><a href="#sec-5-3">5.3. Transactions</a>
<ul>
<li><a href="#sec-5-3-1">5.3.1. Wrapping Each HTTP Request in a Transaction</a></li>
<li><a href="#sec-5-3-2">5.3.2. Explicit Transaction Declaration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-6">6. Function- and Class-Based Views</a>
<ul>
<li><a href="#sec-6-1">6.1. When to Use FBVs or CBVs</a></li>
<li><a href="#sec-6-2">6.2. Keep View Logic Out of URLConfs</a></li>
<li><a href="#sec-6-3">6.3. Use URL Namespaces</a></li>
<li><a href="#sec-6-4">6.4. Django Views Are Functions</a></li>
<li><a href="#sec-6-5">6.5. Don't Use locals() as Views Context</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Function-Based Views</a>
<ul>
<li><a href="#sec-7-1">7.1. Use Decorator To Modify Request And Response</a></li>
</ul>
</li>
<li><a href="#sec-8">8. Class-Based Views</a>
<ul>
<li><a href="#sec-8-1">8.1. Guidelines When Working With CBVs</a></li>
<li><a href="#sec-8-2">8.2. Using Mixins With CBVs</a></li>
<li><a href="#sec-8-3">8.3. Which Django GCBV Should Be Used for What Task?</a></li>
<li><a href="#sec-8-4">8.4. General Tips for Django CBVs</a>
<ul>
<li><a href="#sec-8-4-1">8.4.1. Constraining Django CBV/GCBV Access to Authenticated Users</a></li>
<li><a href="#sec-8-4-2">8.4.2. Performing Custom Actions on Views With Valid Forms</a></li>
<li><a href="#sec-8-4-3">8.4.3. Performing Custom Actions on Views With Invalid Forms</a></li>
<li><a href="#sec-8-4-4">8.4.4. Using the View Object</a></li>
</ul>
</li>
<li><a href="#sec-8-5">8.5. How GCBVs and Forms Fit Together</a>
<ul>
<li><a href="#sec-8-5-1">8.5.1. Views + ModelForm Example</a></li>
<li><a href="#sec-8-5-2">8.5.2. Views + Form Example</a></li>
</ul>
</li>
<li><a href="#sec-8-6">8.6. Using Just django.views.generic.View</a></li>
</ul>
</li>
<li><a href="#sec-9">9. Form Fundamentals</a>
<ul>
<li><a href="#sec-9-1">9.1. Validate All Incoming Data With Django Forms</a></li>
<li><a href="#sec-9-2">9.2. Always Use CSRF Protection and POST With HTTP Forms That Modify Data</a></li>
<li><a href="#sec-9-3">9.3. Understand How to Add Django Form Instance Attributes</a></li>
<li><a href="#sec-9-4">9.4. Know How Form Validation Works</a>
<ul>
<li><a href="#sec-9-4-1">9.4.1. ModelForm Data Is Saved to the Form, Then the Model In- stance</a></li>
</ul>
</li>
<li><a href="#sec-9-5">9.5. Add Errors to Forms with Form.add error()</a></li>
</ul>
</li>
<li><a href="#sec-10">10. Common Patterns for Forms</a>
<ul>
<li><a href="#sec-10-1">10.1. Pattern 1: Simple ModelForm With Default Validators</a></li>
<li><a href="#sec-10-2">10.2. Pattern 2: Custom Form Field Validators in ModelForms</a>
<ul>
<li><a href="#sec-10-2-1">10.2.1. put validator in Model</a></li>
<li><a href="#sec-10-2-2">10.2.2. put validator in Form</a></li>
</ul>
</li>
<li><a href="#sec-10-3">10.3. Pattern 3: Overriding the Clean Stage of Validation</a></li>
<li><a href="#sec-10-4">10.4. Pattern 4: Hacking Form Fields (2 CBVs, 2 Forms, 1 Model)</a></li>
<li><a href="#sec-10-5">10.5. Pattern 5: Reusable Search Mixin View</a></li>
</ul>
</li>
<li><a href="#sec-11">11. Templates</a>
<ul>
<li><a href="#sec-11-1">11.1. Keep Templates Mostly in templates/</a></li>
<li><a href="#sec-11-2">11.2. Template Architecture Patterns</a>
<ul>
<li><a href="#sec-11-2-1">11.2.1. 2-Tier Template Architecture Example</a></li>
<li><a href="#sec-11-2-2">11.2.2. 3-Tier Template Architecture Example</a></li>
<li><a href="#sec-11-2-3">11.2.3. Flat Is Better Than Nested</a></li>
</ul>
</li>
<li><a href="#sec-11-3">11.3. Limit Processing in Templates</a>
<ul>
<li><a href="#sec-11-3-1">11.3.1. Gotcha 1: Aggregation in Templates</a></li>
<li><a href="#sec-11-3-2">11.3.2. Gotcha 2: Filtering With Conditionals in Templates</a></li>
<li><a href="#sec-11-3-3">11.3.3. Gotcha 3: Complex Implied Queries in Templates</a></li>
<li><a href="#sec-11-3-4">11.3.4. Gotcha 4: Hidden CPU Load in Templates</a></li>
<li><a href="#sec-11-3-5">11.3.5. Gotcha 5: Hidden REST API Calls in Templates</a></li>
</ul>
</li>
<li><a href="#sec-11-4">11.4. Exploring Template Inheritance</a></li>
<li><a href="#sec-11-5">11.5. block.super Gives the Power of Control</a></li>
<li><a href="#sec-11-6">11.6. Useful Things to Consider</a>
<ul>
<li><a href="#sec-11-6-1">11.6.1. Avoid Coupling Styles Too Tightly to Python Code</a></li>
<li><a href="#sec-11-6-2">11.6.2. Common Conventions</a></li>
<li><a href="#sec-11-6-3">11.6.3. Location</a></li>
<li><a href="#sec-11-6-4">11.6.4. Use Named Context Objects</a></li>
<li><a href="#sec-11-6-5">11.6.5. Use URL Names Instead of Hardcoded Paths</a></li>
<li><a href="#sec-11-6-6">11.6.6. Debugging Complex Templates</a></li>
</ul>
</li>
<li><a href="#sec-11-7">11.7. Error Page Templates</a></li>
</ul>
</li>
<li><a href="#sec-12">12. Template Tags and Filters</a>
<ul>
<li><a href="#sec-12-1">12.1. Filters Are Functions</a>
<ul>
<li><a href="#sec-12-1-1">12.1.1. When to Write Filters</a></li>
</ul>
</li>
<li><a href="#sec-12-2">12.2. Custom Template Tags</a>
<ul>
<li><a href="#sec-12-2-1">12.2.1. When to Write Template Tags</a></li>
</ul>
</li>
<li><a href="#sec-12-3">12.3. Naming Your Template Tag Libraries</a></li>
<li><a href="#sec-12-4">12.4. Loading Your Template Tag Modules</a>
<ul>
<li><a href="#sec-12-4-1">12.4.1. Watch Out for This Crazy Anti-Pattern</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-13">13. Building REST APIs</a>
<ul>
<li><a href="#sec-13-1">13.1. Fundamentals of Basic REST API Design</a></li>
<li><a href="#sec-13-2">13.2. Implementing a Simple JSON API</a></li>
<li><a href="#sec-13-3">13.3. REST API Architecture</a>
<ul>
<li><a href="#sec-13-3-1">13.3.1. Code for a Project Should Be Neatly Organized</a></li>
<li><a href="#sec-13-3-2">13.3.2. Code for an App Should Remain in the App</a></li>
<li><a href="#sec-13-3-3">13.3.3. Grouping API URLs</a></li>
<li><a href="#sec-13-3-4">13.3.4. Version Your API</a></li>
</ul>
</li>
<li><a href="#sec-13-4">13.4. Shutting Down an External API</a></li>
<li><a href="#sec-13-5">13.5. Rate Limiting Your API</a></li>
</ul>
</li>
<li><a href="#sec-14">14. Working With the Django Admin</a>
<ul>
<li><a href="#sec-14-1">14.1. It's Not for End Users</a></li>
<li><a href="#sec-14-2">14.2. Add <span class="underline"><span class="underline">str</span></span> to Model</a></li>
<li><a href="#sec-14-3">14.3. Adding Callables to ModelAdmin Classes</a></li>
<li><a href="#sec-14-4">14.4. Django's Admin Documentation Generator</a></li>
<li><a href="#sec-14-5">14.5. Securing the Django Admin and Django Admin Docs</a></li>
</ul>
</li>
<li><a href="#sec-15">15. Dealing With the User Model</a>
<ul>
<li><a href="#sec-15-1">15.1. Use Django's Tools for Finding the User Model</a>
<ul>
<li><a href="#sec-15-1-1">15.1.1. Use settings.AUTH_USER_MODEL for Foreign Keys to User</a></li>
<li><a href="#sec-15-1-2">15.1.2. Don't Use get user model() for Foreign Keys to User</a></li>
</ul>
</li>
<li><a href="#sec-15-2">15.2. Custom User Fields for Django 1.8 Projects</a>
<ul>
<li><a href="#sec-15-2-1">15.2.1. Option 1: Subclass AbstractUser</a></li>
<li><a href="#sec-15-2-2">15.2.2. Option 2: Subclass AbstractBaseUser</a></li>
<li><a href="#sec-15-2-3">15.2.3. Option 3: Linking Back From a Related Model</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-16">16. Third-Party Packages</a>
<ul>
<li><a href="#sec-16-1">16.1. Wiring Up Django Packages: The Basics</a></li>
</ul>
</li>
<li><a href="#sec-17">17. Testing</a>
<ul>
<li><a href="#sec-17-1">17.1. Useful Library for Testing Django Projects</a></li>
<li><a href="#sec-17-2">17.2. How to Structure Tests</a></li>
<li><a href="#sec-17-3">17.3. How to Write Unit Tests</a>
<ul>
<li><a href="#sec-17-3-1">17.3.1. Each Test Method Tests One Thing</a></li>
<li><a href="#sec-17-3-2">17.3.2. For Views, When Possible Use the Request Factory</a></li>
<li><a href="#sec-17-3-3">17.3.3. Don't Repeat Yourself Doesn't Apply to Writing Tests</a></li>
<li><a href="#sec-17-3-4">17.3.4. Don't Rely on Fixtures</a></li>
<li><a href="#sec-17-3-5">17.3.5. Things That Should Be Tested</a></li>
<li><a href="#sec-17-3-6">17.3.6. Test for Failure</a></li>
<li><a href="#sec-17-3-7">17.3.7. Use Mock to Keep Unit Tests From Touching the World</a></li>
<li><a href="#sec-17-3-8">17.3.8. Use Fancier Assertion Methods</a></li>
<li><a href="#sec-17-3-9">17.3.9. Document the Purpose of Each Test</a></li>
</ul>
</li>
<li><a href="#sec-17-4">17.4. What About Integration Tests?</a></li>
<li><a href="#sec-17-5">17.5. Continuous Integration</a></li>
<li><a href="#sec-17-6">17.6. Setting Up the Test Coverage Game</a>
<ul>
<li><a href="#sec-17-6-1">17.6.1. Step 1: Start Writing Tests</a></li>
<li><a href="#sec-17-6-2">17.6.2. Step 2: Run Tests and Generate Coverage Report</a></li>
<li><a href="#sec-17-6-3">17.6.3. Step 3: Generate the Report!</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-18">18. Documentation</a>
<ul>
<li><a href="#sec-18-1">18.1. Use reStructuredText for Python Docs</a></li>
<li><a href="#sec-18-2">18.2. Use Sphinx to Generate Documentation From reStructuredText</a></li>
<li><a href="#sec-18-3">18.3. What Docs Should Django Projects Contain?</a></li>
<li><a href="#sec-18-4">18.4. Additional Documentation Resources</a></li>
</ul>
</li>
<li><a href="#sec-19">19. Finding and Reducing Bottlenecks</a>
<ul>
<li><a href="#sec-19-1">19.1. Should You Even Care?</a></li>
<li><a href="#sec-19-2">19.2. Speed Up Query-Heavy Pages</a>
<ul>
<li><a href="#sec-19-2-1">19.2.1. Find Excessive Queries With Django Debug Toolbar</a></li>
<li><a href="#sec-19-2-2">19.2.2. Reduce the Number of Queries</a></li>
<li><a href="#sec-19-2-3">19.2.3. Speed Up Common Queries</a></li>
<li><a href="#sec-19-2-4">19.2.4. Switch ATOMIC REQUESTS to False</a></li>
</ul>
</li>
<li><a href="#sec-19-3">19.3. Know What Doesn't Belong in the Database</a></li>
<li><a href="#sec-19-4">19.4. Cache Queries With Memcached or Redis</a></li>
<li><a href="#sec-19-5">19.5. Identify Specific Places to Cache</a></li>
<li><a href="#sec-19-6">19.6. Compression and Minification of HTML, CSS, and JavaScript</a></li>
<li><a href="#sec-19-7">19.7. Use Upstream Caching or a Content Delivery Network</a></li>
</ul>
</li>
<li><a href="#sec-20">20. Asynchronous Task Queues</a>
<ul>
<li><a href="#sec-20-1">20.1. Do We Need a Task Queue?</a></li>
<li><a href="#sec-20-2">20.2. Choosing Task Queue Software</a></li>
<li><a href="#sec-20-3">20.3. Best Practices for Task Queues</a>
<ul>
<li><a href="#sec-20-3-1">20.3.1. Treat Tasks Like Views</a></li>
<li><a href="#sec-20-3-2">20.3.2. Tasks Aren't Free</a></li>
<li><a href="#sec-20-3-3">20.3.3. Only Pass JSON-Serializable Values to Task Functions</a></li>
<li><a href="#sec-20-3-4">20.3.4. Learn How to Monitor Tasks and Workers</a></li>
<li><a href="#sec-20-3-5">20.3.5. Logging!</a></li>
<li><a href="#sec-20-3-6">20.3.6. Monitor the Backlog</a></li>
<li><a href="#sec-20-3-7">20.3.7. Periodically Clear Out Dead Tasks</a></li>
<li><a href="#sec-20-3-8">20.3.8. Use the Queue's Error Handling</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-21">21. Security</a>
<ul>
<li><a href="#sec-21-1">21.1. Know Django's Security Features</a></li>
<li><a href="#sec-21-2">21.2. Turn Off DEBUG Mode in Production</a></li>
<li><a href="#sec-21-3">21.3. Keep Your Secret Keys Secret</a></li>
<li><a href="#sec-21-4">21.4. HTTPS Everywhere</a>
<ul>
<li><a href="#sec-21-4-1">21.4.1. Use django.middleware.security.SecurityMiddleware</a></li>
<li><a href="#sec-21-4-2">21.4.2. Use Secure Cookies</a></li>
<li><a href="#sec-21-4-3">21.4.3. Use HTTP Strict Transport Security (HSTS)</a></li>
<li><a href="#sec-21-4-4">21.4.4. HTTPS Configuration Tools</a></li>
</ul>
</li>
<li><a href="#sec-21-5">21.5. Use Allowed Hosts Validation</a></li>
<li><a href="#sec-21-6">21.6. Always Use CSRF Protection With HTTP Forms That Modify Data</a></li>
<li><a href="#sec-21-7">21.7. Obfuscate Primary Keys with UUIDs</a></li>
</ul>
</li>
<li><a href="#sec-22">22. Logging</a>
<ul>
<li><a href="#sec-22-1">22.1. When to Use Each Log Level</a>
<ul>
<li><a href="#sec-22-1-1">22.1.1. Log Catastrophes With CRITICAL</a></li>
<li><a href="#sec-22-1-2">22.1.2. Log Production Errors With ERROR</a></li>
<li><a href="#sec-22-1-3">22.1.3. Log Lower-Priority Problems With WARNING</a></li>
<li><a href="#sec-22-1-4">22.1.4. Log Useful State Information With INFO</a></li>
<li><a href="#sec-22-1-5">22.1.5. Log Debug-Related Messages to DEBUG</a></li>
</ul>
</li>
<li><a href="#sec-22-2">22.2. Log Tracebacks When Catching Exceptions</a></li>
<li><a href="#sec-22-3">22.3. One Logger Per Module That Uses Logging</a></li>
<li><a href="#sec-22-4">22.4. Log Locally to Rotating Files</a></li>
<li><a href="#sec-22-5">22.5. Log settings files</a></li>
</ul>
</li>
<li><a href="#sec-23">23. Signals: Use Cases and Avoidance Techniques</a>
<ul>
<li><a href="#sec-23-1">23.1. When to Use and Avoid Signals</a></li>
<li><a href="#sec-23-2">23.2. Signal Avoidance Techniques</a>
<ul>
<li><a href="#sec-23-2-1">23.2.1. Using Custom Model Manager Methods Instead of Signals</a></li>
<li><a href="#sec-23-2-2">23.2.2. Validate Your Model Elsewhere</a></li>
<li><a href="#sec-23-2-3">23.2.3. Override Your Model's Save or Delete Method Instead</a></li>
<li><a href="#sec-23-2-4">23.2.4. Use a Helper Function Instead of Signals</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-24">24. Utilities</a>
<ul>
<li><a href="#sec-24-1">24.1. Create a Core App for Your Utilities</a></li>
<li><a href="#sec-24-2">24.2. Optimize Apps with Utility Modules</a>
<ul>
<li><a href="#sec-24-2-1">24.2.1. Trimming Models</a></li>
</ul>
</li>
<li><a href="#sec-24-3">24.3. Django's Own Swiss Army Knife</a></li>
<li><a href="#sec-24-4">24.4. Exceptions</a>
<ul>
<li><a href="#sec-24-4-1">24.4.1. django.core.exceptions.ImproperlyConfigured</a></li>
<li><a href="#sec-24-4-2">24.4.2. django.core.exceptions.ObjectDoesNotExist</a></li>
<li><a href="#sec-24-4-3">24.4.3. django.core.exceptions.PermissionDenied</a></li>
</ul>
</li>
<li><a href="#sec-24-5">24.5. Serializers and Deserializers</a>
<ul>
<li><a href="#sec-24-5-1">24.5.1. django.core.serializers.json.DjangoJSONEncoder</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-25">25. Deployment:Platforms as a Service</a>
<ul>
<li><a href="#sec-25-1">25.1. Automate All the Things!</a></li>
</ul>
</li>
<li><a href="#sec-26">26. Deploying Django Projects</a>
<ul>
<li><a href="#sec-26-1">26.1. Single-Server for Small Projects</a>
<ul>
<li><a href="#sec-26-1-1">26.1.1. Example: Quick Ubuntu + Gunicorn Setup</a></li>
</ul>
</li>
<li><a href="#sec-26-2">26.2. Multi-Server for Medium to Large Projects</a>
<ul>
<li><a href="#sec-26-2-1">26.2.1. Advanced Multi-Server Setup</a></li>
</ul>
</li>
<li><a href="#sec-26-3">26.3. WSGI Application Servers</a></li>
<li><a href="#sec-26-4">26.4. Automated, Repeatable Deployments</a></li>
</ul>
</li>
<li><a href="#sec-27">27. Continuous Integration</a>
<ul>
<li><a href="#sec-27-1">27.1. Principles of Continuous Integration</a>
<ul>
<li><a href="#sec-27-1-1">27.1.1. Write Lots of Tests!</a></li>
<li><a href="#sec-27-1-2">27.1.2. Keeping the Build Fast</a></li>
</ul>
</li>
<li><a href="#sec-27-2">27.2. Tools for Continuously Integrating Your Project</a>
<ul>
<li><a href="#sec-27-2-1">27.2.1. Tox</a></li>
<li><a href="#sec-27-2-2">27.2.2. Jenkins</a></li>
</ul>
</li>
<li><a href="#sec-27-3">27.3. Continuous Integration as a Service</a>
<ul>
<li><a href="#sec-27-3-1">27.3.1. Code Coverage as a Service</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-28">28. Debugging</a>
<ul>
<li><a href="#sec-28-1">28.1. Debugging in Development</a>
<ul>
<li><a href="#sec-28-1-1">28.1.1. Use django-debug-toolbar</a></li>
<li><a href="#sec-28-1-2">28.1.2. That Annoying CBV Error</a></li>
<li><a href="#sec-28-1-3">28.1.3. Master the Python Debugger</a></li>
<li><a href="#sec-28-1-4">28.1.4. Remember the Essentials for Form File Uploads</a></li>
</ul>
</li>
<li><a href="#sec-28-2">28.2. Debugging Production Systems</a>
<ul>
<li><a href="#sec-28-2-1">28.2.1. Read the Logs the Easy Way</a></li>
<li><a href="#sec-28-2-2">28.2.2. Mirroring Production</a></li>
<li><a href="#sec-28-2-3">28.2.3. UserBasedExceptionMiddleware</a></li>
<li><a href="#sec-28-2-4">28.2.4. That Troublesome settings.ALLOWED HOSTS Error</a></li>
</ul>
</li>
<li><a href="#sec-28-3">28.3. Feature Flags</a>
<ul>
<li><a href="#sec-28-3-1">28.3.1. Feature Flag Packages</a></li>
<li><a href="#sec-28-3-2">28.3.2. Unit Testing Code Affected by Feature Flags</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-29">29. Internationalization and Localization</a>
<ul>
<li><a href="#sec-29-1">29.1. Define Python Source Code Encodings</a></li>
<li><a href="#sec-29-2">29.2. Wrap Content Strings with Translation Functions</a>
<ul>
<li><a href="#sec-29-2-1">29.2.1. Convention: Use the Underscore Alias to Save Typing</a></li>
</ul>
</li>
<li><a href="#sec-29-3">29.3. Don't Interpolate Words in Sentences</a></li>
<li><a href="#sec-29-4">29.4. Unicode Tricks</a></li>
<li><a href="#sec-29-5">29.5. Browser Page Layout</a></li>
</ul>
</li>
<li><a href="#sec-30">30. Security Settings Reference</a>
<ul>
<li><a href="#sec-30-1">30.1. Email SSL</a></li>
<li><a href="#sec-30-2">30.2. SESSION SERIALIZER</a></li>
<li><a href="#sec-30-3">30.3. SECURE PROXY SSL HEADER</a></li>
</ul>
</li>
<li><a href="#sec-31">31. Some Useful Packages</a>
<ul>
<li><a href="#sec-31-1">31.1. Core</a></li>
<li><a href="#sec-31-2">31.2. Asynchronous</a></li>
<li><a href="#sec-31-3">31.3. Deployment</a></li>
<li><a href="#sec-31-4">31.4. Forms</a></li>
<li><a href="#sec-31-5">31.5. Logging</a></li>
<li><a href="#sec-31-6">31.6. Project Templates</a></li>
<li><a href="#sec-31-7">31.7. REST APIs</a></li>
<li><a href="#sec-31-8">31.8. Testing</a></li>
<li><a href="#sec-31-9">31.9. Views</a></li>
<li><a href="#sec-31-10">31.10. Feature Flag</a></li>
</ul>
</li>
<li><a href="#sec-32">32. Reference</a></li>
</ul>
</div>
</div>
<p>
django學習筆記<br>
隨筆亂記，陸續增加中<br>
</p>
                        
                            <a href="/my_blog/2016/02/19/django學習筆記/" class="postShorten-excerpt_link link">
                                Continue reading
                            </a>
                            
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-right" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2015/12/03/值得閱讀的一些書或文章about-CS/">值得閱讀的一些書或文章about CS</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Dec 03 2015 19:16:43 GMT+0800">
	
		    Dec 03, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/computer-science/">computer-science</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-excerpt" itemprop="articleBody">
                        <p>突然想到可以PO一些這種東西<br>因為是突然<br>所以東西還很少<br>未來有看到好文章或書的話會陸續增加<br>
                        
                            <a href="/my_blog/2015/12/03/值得閱讀的一些書或文章about-CS/" class="postShorten-excerpt_link link">
                                Continue reading
                            </a>
                            
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2015/12/03/PyCharm-import-django-project/">PyCharm import django project</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Dec 03 2015 19:15:15 GMT+0800">
	
		    Dec 03, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/python/">python</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <a id="more"></a>
<p>PyCharm &gt; Preferences &gt; Project &gt; Project interpreter<br>choose the python interpreter which contains django</p>
<p>PyCharm &gt; Preferences &gt; Languages &amp; Frameworks &gt; Django<br>check the Enable Django Support<br>Django project root: project root path<br>Settings: project settings.py path<br>Manage script: manage.py</p>

                        
                            

                        
                        
                            <p>
                                <a href="/my_blog/2015/12/03/PyCharm-import-django-project/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2015/12/03/pip指令筆記/">pip指令筆記</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Dec 03 2015 18:44:19 GMT+0800">
	
		    Dec 03, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/python/">python</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <a id="more"></a>
<p>python 3rd library通常會撞到：python_path/lib/python3.4/site-packages</p>
<p>以安裝ipython為例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#安裝/反安裝package</span></div><div class="line">pip install ipython</div><div class="line">pip uninstall ipython</div><div class="line"></div><div class="line"><span class="comment">#找出ipython安裝在哪</span></div><div class="line">pip show --files ipython</div><div class="line"></div><div class="line"><span class="comment">#更新package</span></div><div class="line">pip install --upgrade ipython</div><div class="line"></div><div class="line"><span class="comment">#列出哪些package需要更新</span></div><div class="line">pip list --outdated</div></pre></td></tr></table></figure>

                        
                            

                        
                        
                            <p>
                                <a href="/my_blog/2015/12/03/pip指令筆記/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2015/12/03/pyenv-virtualenv指令筆記/">pyenv-virtualenv指令筆記</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Dec 03 2015 18:35:46 GMT+0800">
	
		    Dec 03, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/python/">python</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-content" itemprop="articleBody">
                        <a id="more"></a>
<h2 id="Mac下安裝"><a href="#Mac下安裝" class="headerlink" title="Mac下安裝"></a>Mac下安裝</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install pyenv-virtualenv</div></pre></td></tr></table></figure>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#新增一個以python3.4為底的virtual env在/usr/local/opt/pyenv/versions</span></div><div class="line">pyenv virtualenv 3.4 my-virtual-env-3.4</div><div class="line"><span class="comment">#移除</span></div><div class="line">pyenv uninstall my-virtual-env﹣3.4</div></pre></td></tr></table></figure>
<p>其他請參照<a href="/2015/12/03/pyenv指令筆記/">pyenv指令筆記</a></p>

                        
                            

                        
                        
                            <p>
                                <a href="/my_blog/2015/12/03/pyenv-virtualenv指令筆記/#post-footer" class="postShorten-excerpt_link link">
                                    Comment and share
                                </a>
                            </p>
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-right" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2015/12/03/pyenv指令筆記/">pyenv指令筆記</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Dec 03 2015 18:31:34 GMT+0800">
	
		    Dec 03, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/python/">python</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-excerpt" itemprop="articleBody">
                        <h2 id="MAC底下安裝"><a href="#MAC底下安裝" class="headerlink" title="MAC底下安裝"></a>MAC底下安裝</h2><p>記得先裝xcode command line tools<br>pyenv會裝到/usr/local/opt/pyenv<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install pyenv</div></pre></td></tr></table></figure></p>
<p>修改bash_profile加上<br><figure class="highlight bash"><figcaption><span>~/.bash_profile</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span></div></pre></td></tr></table></figure></p>
                        
                            <a href="/my_blog/2015/12/03/pyenv指令筆記/" class="postShorten-excerpt_link link">
                                Continue reading
                            </a>
                            
                        
                    </div>
                
            </div>
            
        </article>
    
        
        <article class="postShorten postShorten--thumbnailimg-right" itemscope itemType="http://schema.org/BlogPosting">
            <div class="postShorten-wrap">
                <div class="postShorten-header">
                    <h1 class="postShorten-title" itemprop="headline">
                        
                                <a class="link-unstyled" href="/my_blog/2015/12/03/developer在Mac上需要安裝的工具筆記/">developer在Mac上需要安裝的工具筆記</a>
                        
                    </h1>
                    <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Dec 03 2015 18:16:57 GMT+0800">
	
		    Dec 03, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/my_blog/categories/mac/">mac</a>


    
</div>
                </div>
                
                
                    <div class="postShorten-excerpt" itemprop="articleBody">
                        <p>筆記以下目前mac有裝的app<br>developer取向<br>
                        
                            <a href="/my_blog/2015/12/03/developer在Mac上需要安裝的工具筆記/" class="postShorten-excerpt_link link">
                                Continue reading
                            </a>
                            
                        
                    </div>
                
            </div>
            
        </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 Cwza. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        <!-- Define author's picture -->


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/f563bb5ba525d2aa148cd22fb4c2db26?s=110"/>
        
            <h4 id="about-card-name">Cwza</h4>
        
            <h5 id="about-card-bio"><p>Hello everyone.</br> I’m cwza.</br> Welcome to my blog.</br></p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Software Engineer</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Taiwan/Taipei
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/my_blog/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/my_blog/assets/js/script.min.js"></script>
<!--SCRIPTS END-->


    <script type="text/javascript">
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
            e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','rxPzK7_9dZFEqRaWyGy2','2.0.0');
    </script>


</html>
